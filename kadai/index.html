<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ごはんリスト</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.1/css/all.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@300&family=Train+One&family=Zen+Maru+Gothic&display=swap" rel="stylesheet">
</head>
<body>
<header>
<h1>ごはんリスト</h1>
</header>
<main>
    <ul id="box">
        <li id="blankBox">
            <input type="text" id="name">
            <select name="category" id="category">
                <option value=""></option>
                <option value="jpn">和食</option>
                <option value="ita">イタリアン</option>
                <option value="mex">メキシカン</option>
                <option value="fra">フレンチ</option>
                <option value="spa">スパニッシュ</option>
            </select>
            <textarea id="memo"></textarea>
            <input type="text" id="url" >
            <i id="save" class="fa-solid fa-circle-check"></i>
            <i id="clear" class="fa-solid fa-trash-can"></i>
        </li>
        <li id="fillBox">
            <input type="text" id="name" value="お店の名前">
            <select name="category" id="category">
                <option value="">カテゴリー</option>
                <option value="jpn">和食</option>
                <option value="ita">イタリアン</option>
                <option value="mex">メキシカン</option>
                <option value="fra">フレンチ</option>
                <option value="spa">スパニッシュ</option>
            </select>
            <textarea id="memo">お店メモ</textarea>
            <input type="text" id="url" value="食べログURL">
            <i id="save" class="fa-solid fa-circle-check"></i>
            <i id="clear" class="fa-solid fa-trash-can"></i>
        </li>
        <li>
            <button id="addBox">+</button>
        </li>
    </ul>

</main>
<script>

// 新規追加(addがクリックされたらblankBoxをaddBoxの左側に追加する)
$("#addBox").on("click", function(){
    $("#addBox").before();
})



//1.Save クリックイベント
// 値取得・保存
$("#save").on("click", function(){
    const key = $("#name").val();
    const memo = $("#memo").val();
    localStorage.setItem(key, memo);
})


//2.clear クリックイベント
$("#clear").on("click", function(){
    localStorage.clear();
    $("#blankBox").empty();
})


//3.ページ読み込み：保存データ取得表示
for(let i=0; i<localStorage.length; i++){
    const key   = localStorage.key(i);
    const value = localStorage.getItem(key);
    const html = '<tr><th>'+key+'</th><td>'+value+'</td></tr>';
    $("#blankbox").append(html);
}

</script>
</body>
</html>